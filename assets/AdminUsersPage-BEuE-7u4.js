import{i as B,d as F,r as t,j as e,e as l,C as I,s as P,k as Y,l as W,m as $,H as R}from"./index-DP81XDn8.js";import{M as q}from"./Modal-C34jcFjS.js";const z="_adminCard_1cg3f_1",G="_blue_1cg3f_17",J="_adminHeading_1cg3f_25",K="_changeBtn_1cg3f_33",L="_deleteBtn_1cg3f_43",O="_btnsDiv_1cg3f_51",Q="_newAdminBtn_1cg3f_61",T="_closeBtn_1cg3f_71",V="_saveAdminBtn_1cg3f_81",X="_label_1cg3f_89",Z="_input_1cg3f_103",ee="_fieldset_1cg3f_129",se="_error_1cg3f_145",ne="_container_1cg3f_155",ae="_modalHeading_1cg3f_167",s={adminCard:z,blue:G,adminHeading:J,changeBtn:K,deleteBtn:L,btnsDiv:O,newAdminBtn:Q,closeBtn:T,saveAdminBtn:V,label:X,input:Z,fieldset:ee,error:se,container:ne,modalHeading:ae};function le(){const o=B(n=>n.admin.admins),m=B(n=>n.admin.users),j=F(),[i,f]=t.useState(""),[h,_]=t.useState(""),[w,v]=t.useState(""),[g,N]=t.useState(""),[u,x]=t.useState(null),[p,A]=t.useState(""),[r,c]=t.useState({email:null,password:null}),[C,b]=t.useState(null),H=n=>{f(n.target.value)},E=n=>{_(n.target.value)},S=n=>{A(n.target.value)},d=()=>{f(""),_(""),A(""),v(""),N(""),c({email:null,password:null}),b(null),x(null)},y=async n=>{if(n.preventDefault(),!i.includes("@")||!i.endsWith(".com")||h.length<8){!i.includes("@")||!i.endsWith(".com")?c(a=>({...a,email:"Please enter a correct email"})):c(a=>({...a,email:null})),h.length<8?c(a=>({...a,password:"Please enter a correct password (atleast 8 characters)"})):c(a=>({...a,password:null})),P("error","Please enter valid credentials");return}await j(Y({email:i,password:h})),d()},D=n=>{v(n),x("edit")},k=async n=>{n.preventDefault(),w!==""&&(p!==""&&p.length>7?(await j(W(w,p)),d()):(b("Please enter a valid password (atleast 8 characters)"),P("error","Please enter a valid password.")))},M=n=>{x("delete"),N(n)},U=async n=>{n.preventDefault(),g!==""&&(await j($(g)),d())};return e.jsxs("div",{className:s.container,children:[e.jsxs("div",{children:[e.jsx("h1",{children:"All Users"}),e.jsxs("div",{children:[m.length===0||!m&&e.jsx("p",{children:"No users found"}),m.length>0&&e.jsx("ul",{children:m.map(n=>e.jsx("li",{children:n.name},n.email))})]})]}),e.jsxs("div",{className:s.admins,children:[e.jsx("h1",{children:"Admins"}),e.jsxs("div",{children:[o.length===0||!o&&e.jsx("p",{children:"No Admins found"}),e.jsx(l,{onClick:()=>x("add"),className:s.newAdminBtn,children:"Add a new Admin?"}),o.length>0&&e.jsx("div",{children:o.map((n,a)=>e.jsxs(I,{className:s.adminCard,children:[e.jsx("div",{children:e.jsxs("h3",{children:[e.jsxs("span",{className:`${s.blue} ${s.adminHeading}`,children:["Admin ",a+1,":"," "]}),e.jsx("span",{className:s.adminEmail,children:n.email})]})}),e.jsxs("div",{className:s.btnsDiv,children:[e.jsx(l,{className:s.changeBtn,onClick:()=>D(n.email),children:"Change Password"}),e.jsx(l,{className:s.deleteBtn,onClick:()=>M(n.email),children:"Delete Admin"})]})]},n.email))})]})]}),e.jsx("div",{children:u!==null&&e.jsxs(q,{onClose:d,children:[u==="add"&&e.jsxs("form",{onSubmit:y,children:[e.jsx("div",{children:e.jsx("h3",{className:s.modalHeading,children:"Enter new Admin Credentials"})}),e.jsxs("fieldset",{className:s.fieldset,children:[e.jsx("label",{className:s.label,htmlFor:"email",children:"Admin Email"}),e.jsx("input",{className:s.input,type:"email",autoComplete:"email",value:i,onChange:H}),r&&r.email&&e.jsx("p",{className:s.error,children:r.email})]}),e.jsxs("fieldset",{className:s.fieldset,children:[e.jsx("label",{className:s.label,htmlFor:"password",children:"Admin Password"}),e.jsx("input",{className:s.input,type:"password",autoComplete:"new-password",value:h,onChange:E}),r&&r.password&&e.jsx("p",{className:s.error,children:r.password})]}),e.jsxs("div",{children:[e.jsx(l,{className:s.closeBtn,type:"button",onClick:d,children:"Close"}),e.jsx(l,{className:s.saveAdminBtn,type:"submit",children:"Save Admin"})]})]}),u==="edit"&&e.jsxs("form",{onSubmit:k,children:[e.jsx("div",{children:e.jsxs("h3",{className:s.modalHeading,children:["Enter new Password for ",w]})}),e.jsxs("fieldset",{className:s.fieldset,children:[e.jsx("label",{className:s.label,htmlFor:"password",children:"New Password"}),e.jsx("input",{className:s.input,type:"password",autoComplete:"new-password",value:p,onChange:S}),C&&e.jsx("p",{className:s.error,children:C})]}),e.jsxs("div",{children:[e.jsx(l,{className:s.closeBtn,type:"button",onClick:d,children:"Close"}),e.jsx(l,{className:s.saveAdminBtn,type:"submit",children:"Save Password"})]})]}),u==="delete"&&e.jsxs("form",{onSubmit:U,children:[e.jsx("div",{children:e.jsxs("h3",{className:s.modalHeading,children:["Are You sure You want to delete admin: ",g]})}),e.jsxs("div",{children:[e.jsx(l,{className:s.closeBtn,type:"button",onClick:d,children:"Close"}),e.jsx(l,{className:s.deleteBtn,type:"submit",children:"Yes, Delete Admin"})]})]})]})})]})}function ie(){return e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsx("title",{children:"All Users"}),e.jsx("meta",{name:"description",content:"All Users page for the admins of react-ecommerce, here admins can add or remove an admin or change the password for an admin, or view all the users"})]}),e.jsx(le,{}),";"]})}export{ie as default};
